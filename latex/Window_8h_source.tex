\hypertarget{Window_8h_source}{}\doxysection{Window.\+h}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// Created by martin on 2023-\/10-\/05.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef DT047GPROJECT\_CONWAY\_WINDOW\_H}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define DT047GPROJECT\_CONWAY\_WINDOW\_H}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}BaseWindow.h"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}ConwayGrid.h"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <SFML/Graphics.hpp>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{namespace }conway \{}
\DoxyCodeLine{19     \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} sfFontFilename = \textcolor{stringliteral}{"{}/usr/share/fonts/opentype/cantarell/Cantarell-\/Thin.otf"{}};}
\DoxyCodeLine{20 }
\DoxyCodeLine{25     \textcolor{keyword}{template}<\textcolor{keyword}{typename} Gr\textcolor{keywordtype}{id}>}
\DoxyCodeLine{26     \textcolor{keyword}{class }\mbox{\hyperlink{classconway_1_1Window}{Window}} : \textcolor{keyword}{public} \mbox{\hyperlink{classconway_1_1BaseWindow}{conway::BaseWindow}} \{}
\DoxyCodeLine{27         \textcolor{keyword}{using }coord\_type = int;}
\DoxyCodeLine{28         coord\_type height;}
\DoxyCodeLine{29         coord\_type width;}
\DoxyCodeLine{30         \mbox{\hyperlink{structconway_1_1Grid}{Grid}} grid;}
\DoxyCodeLine{31         sf::Font windowFont;}
\DoxyCodeLine{32         \textcolor{keyword}{using }BaseWindow::draw;}
\DoxyCodeLine{33     \textcolor{keyword}{public}:}
\DoxyCodeLine{34         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} FRAMRATE\_LIMIT = 30;}
\DoxyCodeLine{35 }
\DoxyCodeLine{41         \mbox{\hyperlink{classconway_1_1Window_aeb1fabb8041d82c03c8e376013d0cd13}{Window}}(\textcolor{keywordtype}{size\_t} width, \textcolor{keywordtype}{size\_t} height, \mbox{\hyperlink{structconway_1_1Grid}{Grid}} grid):}
\DoxyCodeLine{42       \textcolor{comment}{//  BaseWindow(BaseWindow::GetMode(false, 640, 480), false),}}
\DoxyCodeLine{43         width(width), height(height), grid(grid)\{}
\DoxyCodeLine{44             setFramerateLimit(FRAMRATE\_LIMIT);}
\DoxyCodeLine{45             setup\_handlers();}
\DoxyCodeLine{46             load\_font();}
\DoxyCodeLine{47         \}}
\DoxyCodeLine{52         \textcolor{keywordtype}{void} \mbox{\hyperlink{classconway_1_1Window_a427f4a96b25c447b2d15ec82d0693372}{draw}}()\{}
\DoxyCodeLine{53             clear();}
\DoxyCodeLine{54             \textcolor{keyword}{auto} size = getSize();}
\DoxyCodeLine{55             \textcolor{keyword}{auto} height\_per\_life = size.y * 1.0f/ height;}
\DoxyCodeLine{56             \textcolor{keyword}{auto} width\_per\_life = size.x * 1.0f/ width;}
\DoxyCodeLine{57             \textcolor{keyword}{auto} rect = sf::RectangleShape(\{width\_per\_life, height\_per\_life\});}
\DoxyCodeLine{58             \textcolor{keyword}{auto} alive = 0;}
\DoxyCodeLine{59             \textcolor{keyword}{auto} pixels = 0;}
\DoxyCodeLine{60             \textcolor{keywordflow}{for}(coord\_type cx = grid\_min\_x; cx < width + grid\_min\_x; cx++)\{}
\DoxyCodeLine{61                 \textcolor{keywordflow}{for}(coord\_type cy = grid\_min\_y; cy < height + grid\_min\_y; cy++)\{}
\DoxyCodeLine{62                     \textcolor{keywordflow}{if}(grid.isAlive(\{cx, cy\}))\{}
\DoxyCodeLine{63                         rect.setPosition(cx * width\_per\_life -\/ grid\_min\_x * width\_per\_life, cy * height\_per\_life -\/ grid\_min\_y * height\_per\_life);}
\DoxyCodeLine{64                         \mbox{\hyperlink{classconway_1_1Window_a427f4a96b25c447b2d15ec82d0693372}{draw}}(rect);}
\DoxyCodeLine{65                     \}}
\DoxyCodeLine{66                 \}}
\DoxyCodeLine{67             \}}
\DoxyCodeLine{68             std::string meta = \textcolor{stringliteral}{"{}Alive "{}} + std::to\_string(alive) + \textcolor{stringliteral}{"{}["{}} + std::to\_string(grid\_min\_x) + \textcolor{stringliteral}{"{}, "{}} + std::to\_string(grid\_min\_y) + \textcolor{stringliteral}{"{}]"{}}}
\DoxyCodeLine{69             \textcolor{stringliteral}{"{}-\/["{}} + std::to\_string(width + grid\_min\_x) + \textcolor{stringliteral}{"{}, "{}} + std::to\_string(height + grid\_min\_y) + \textcolor{stringliteral}{"{}]"{}};}
\DoxyCodeLine{70             \textcolor{keyword}{auto} text = sf::Text(meta, windowFont, 50);}
\DoxyCodeLine{71             text.setFillColor(sf::Color::White);}
\DoxyCodeLine{72             \mbox{\hyperlink{classconway_1_1Window_a427f4a96b25c447b2d15ec82d0693372}{draw}}(text);}
\DoxyCodeLine{73             display();}
\DoxyCodeLine{74         \}}
\DoxyCodeLine{75 }
\DoxyCodeLine{76         coord\_type grid\_min\_y = 0;}
\DoxyCodeLine{77         coord\_type grid\_min\_x = 0;}
\DoxyCodeLine{78 }
\DoxyCodeLine{84         \textcolor{keywordtype}{bool} \mbox{\hyperlink{classconway_1_1Window_abe27b8a57d1d5e1a9ed4f94b4a75c06e}{handleEvents}}(sf::Event event) \{}
\DoxyCodeLine{85             \textcolor{comment}{// Call handler if it exists.}}
\DoxyCodeLine{86             \textcolor{keywordflow}{return} events[\textcolor{keyword}{event}.type] \&\& events[\textcolor{keyword}{event}.type](event);}
\DoxyCodeLine{87         \}}
\DoxyCodeLine{91         \textcolor{keywordtype}{void} \mbox{\hyperlink{classconway_1_1Window_a2cad0f35e765470301ea7012c856bdc5}{play}}()\{}
\DoxyCodeLine{92             sf::Event playEvent;}
\DoxyCodeLine{93             \textcolor{keywordflow}{while}(isOpen())\{}
\DoxyCodeLine{94                 \mbox{\hyperlink{classconway_1_1Window_a427f4a96b25c447b2d15ec82d0693372}{draw}}();}
\DoxyCodeLine{95                 grid.tick();}
\DoxyCodeLine{96                 \textcolor{keywordflow}{while}(pollEvent(playEvent))}
\DoxyCodeLine{97                     \mbox{\hyperlink{classconway_1_1Window_abe27b8a57d1d5e1a9ed4f94b4a75c06e}{handleEvents}}(playEvent);}
\DoxyCodeLine{98             \}}
\DoxyCodeLine{99         \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{keyword}{private}:}
\DoxyCodeLine{102         \textcolor{keywordtype}{void} setup\_handlers() \{}
\DoxyCodeLine{103             events[sf::Event::KeyPressed] = [\textcolor{keyword}{this}](sf::Event e)\{}
\DoxyCodeLine{104                 \textcolor{keywordflow}{switch} (e.key.code) \{}
\DoxyCodeLine{105                     \textcolor{keywordflow}{case} sf::Keyboard::Key::Left:}
\DoxyCodeLine{106                         grid\_min\_x-\/-\/;}
\DoxyCodeLine{107                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{108                     \textcolor{keywordflow}{case} sf::Keyboard::Key::Right:}
\DoxyCodeLine{109                         grid\_min\_x++;}
\DoxyCodeLine{110                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{111                     \textcolor{keywordflow}{case} sf::Keyboard::Key::Up:}
\DoxyCodeLine{112                         grid\_min\_y-\/-\/;}
\DoxyCodeLine{113                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{114                     \textcolor{keywordflow}{case} sf::Keyboard::Key::Down:}
\DoxyCodeLine{115                         grid\_min\_y++;}
\DoxyCodeLine{116                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{117                 \}}
\DoxyCodeLine{118                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{119             \};}
\DoxyCodeLine{120             events[sf::Event::Closed] = [\textcolor{keyword}{this}](sf::Event e)\{}
\DoxyCodeLine{121                 this-\/>close();}
\DoxyCodeLine{122                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{123             \};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125         \}}
\DoxyCodeLine{126 }
\DoxyCodeLine{127         \textcolor{keywordtype}{void} load\_font() \{}
\DoxyCodeLine{128             windowFont.loadFromFile(sfFontFilename);}
\DoxyCodeLine{129         \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131         std::unordered\_map<sf::Event::EventType, std::function<bool(sf::Event)>> events;}
\DoxyCodeLine{132     \};}
\DoxyCodeLine{133 \}}
\DoxyCodeLine{134 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//DT047GPROJECT\_CONWAY\_WINDOW\_H}}

\end{DoxyCode}
